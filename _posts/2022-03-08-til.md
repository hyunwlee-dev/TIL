---
layout: post
title: "React"
author: "hyunwlee"
---

---

# <span style="background:black;color:aqua">React를 다루는 기술</span>

 vanila  JavaScript에서 처럼 document 요소를 통해 변경하는 것은 애플리케이션 규모가 크면 상당히 복잡해지고 성능이 떨어질 수 있다.  

 기존 뷰를 버리고 처음부터 새로 랜더링하는 방식을 사용하자  

- 더 이상 어떻게 변화를 줄지 신경 쓸 필요가 없음

  

CPU점유율이 크게 증가하지 않을까? DOM은 느리기에  

메모리를 많이 잡아먹지 않을까?  

랜더링에 끊김 현상이 발생하지 않을까?  

  

아니다.  

최대한 성능을 아끼고 편안한 사용자 경험을 제공하면서 구현할 수 있다.

  

오직 V(view)만 신경쓰는 라이브러리이다.  

  

##### 컴포넌트

- 재사용이 가능한 API로 수많은 기능들을 내장하고 있으며, 컴포넌트 하나에서 해당 컴포넌트의 생김새와 작동 방식을 정의한다.

  

##### 랜더링

- 사용자 화면에 뷰를 보여주는 것

  

#####  리액트 라이브러리는 뷰를 어떻게 랜더링하길래 데이터가 변할 때 마다 새롭게 리랜더링하면서 성능을 아끼고, 최적의 사용자 경험을 제공할 수 있을까?

######  이를 이해하기 위해서

- ##### 초기 랜더링

  - 리액트 컴포넌트가 최초로 실행

- ##### 리랜더링

  - 컴포넌트의 데이터 변경으로 다시 실행



##### 1. 초기 랜더링

 어떤 UI관련 프레임워크, 라이브러리를 사용하든지 간에 맨 처음 어떻게 보일지를 정하는 초기랜더링이 필요함. render()  

컴포넌트가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환함  

 컴포넌트 내부에는 컴포넌트가 들어갈 수 있다. 고로 render()는 재귀적으로 랜더링한다.  

 이렇게 최상위 컴포넌트의 랜더링 작업이 끝나면 지니고 있는 정보들을 사용하여 HTML 마크업(markup)을 만들고, 이를 우리가 정하는 실제 페이지의 DOM요소 안에 주입함.

  

##### 2. 조화 과정

 리액트 라이브러리에서 중요한 업데이트  

업데이트 과정을 거친다 보다는 '조화 과정'을 거친다가 맞음  

######  컴포넌트에서 데이터에 변화가 있을 때 우리가 보기에는 변화에 따라 뷰가 변형되는 것처럼 보이지만, 사실은 새로운 요소를 갈아 끼우는 것임  

이 작업 또한 render()가 맡아서 함  

######  render()는 반환하는 결과를 곧바로 DOM에 반영하지 않고, 이전에 render()가 만들었던 컴포넌트 정보와 현재 render()가 만든 컴포넌트 정보를 비교함  

 자바스크립트를 사용하여 두 가지 뷰를 최소한의 연산으로 비교한 후, 둘의 차이를 알아내 최소한의 연산으로 DOM트리를 업데이트한다.  

 결국 방식 자체는 루트노드부터 시작하여 전체 컴포넌트를 처음부터 다시 랜더링하는 것 처럼 보이지만, 사실 최적의 자원을 사용하여 이를 수행한 것  

  



#### Virtual DOM

##### DOM이란?  

객체로 문서 구조를 표현하는 방법으로 XML이나 HTML로 작성  

웹 브라우저는 DOM을 활용하여 객체에 JavaScript와 CSS를 적용함  

DOM은 트리 형태라서 특정 노드를 찾거나 수정하거나 제거하거나 원하는 곳에 삽입할 수 있음  

  

##### DOM은 느림?

 동적 UI에 최적화되어 있지 않다. HTML은 자체적으로 정적이다. 자바스크립트를 사용해서 이를 동적으로 만들 수 있다.  

규모가 큰 웹 애플리케이션에서 DOM에 직접 접근하여 변화를 주다 보면 성능 이슈가 조금씩 발생하기 시작한다. 느려진다.  

 땡! DOM 자체는 빠르다.  

###### 단, 웹 브라우저 단에서 DOM에 변화가 일어나면 웹 브라우저가 CSS를 다시 연산하고, 레이아웃을 구성하고, 페이지를 리페인트한다. 이 과정에서 시간이 허비되는 것이다.  

  

##### 해결법

DOM을 최소한으로 조작하여 작업을 처리하는 방식으로 개선  

###### 리액트는 Virtual DOM방식을 사용하여 DOM업데이트를 추상화함으로써 DOM처리 횟수를 최소화하고 효율적으로 진행한다.  

  

##### Virtual DOM

######  실제 DOM에 접근하여 조작하는 대신, 이를 추상화한 자바스크립트 객체를 구성하여 사용함.  

마치 실제 DOM의 가벼운 사본과 비슷함.  

리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트할 때는 다음 세 가지 절차를 밟음.  

1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리랜더링함  
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교함  
3. 바뀐 부분만 실제 DOM에 적용함



##### 결론

리액트와 Virtual DOM이 언제나 제공할 수 있는 것은 바로 업데이트 처리 간결성  

UI를 업데이트하는 과정에서 생기는 복잡함을 모두 해소하고, 더욱 쉽게 업데이트에 접근할 수 있음



##### node_modules, bundler

프로젝트 생성 과정에서 node_modules 디렉터리에 react 모듈이 설치됨  

import 구문을 통해 리액트를 불러와서 사용할 수 있음  

이렇게 모듈을 불러와서 사용하는 것은 <span style="font-weight:bold">번들러(bundler)</span>를 사용하기 때문  

##### <ins>bundler</ins>

- 묶는다. 즉, 파일을 묶듯이 연결한다.  

- 번들 종류: webPack(주로 사용하는 추세), Parcel, browserify라는 도구들이 존재  
  - <strong><ins>webPack</ins></strong>: SVG파일과 CSS파일을 불러와서 사용할 수 있음. 이렇게 파일들을 불러오는 것은 webPack의 <strong>loader</strong>라는 기능이 담당함 
    - <strong>loader 종류</strong>
      - <ins>file-loader</ins>: 웹 폰트나 미디어 파일등을 불러올 수 있게 해준다.
      - <ins>css-loader</ins>: CSS 파일을 불러올 수 있게 해준다.
      - <ins>babel-loader</ins>: 최신 자바스크립트 문법으로 작성된 코드를 => ES5 문법으로 변환해줌 (버전을 낮춰준다)



##### JSX

보기 쉽고 익숙하다.  



##### ReactDOM.render는 무엇인가요?  

```
ReactDOM.render(
	<React.StrictMode>
		<App />
	</React.StrictMode>
	document.getElementById('root');
);
```

 컴포넌트를 페이지에 랜더링하는 역할을 하며, react-dom 모듈을 불러와 사용할 수 있음.  

 이 함수의 

- Parameter 1
  - 페이지에 랜더링할 내용을 JSX형태로 작성하고, 
- Parameter 2
  - 해당 JSX를 랜더링할 document 내부 요소를 설정합니다. 여기서는 id가 root인 요소 안에 랜더링을 하도록 설정했음 `public/index.html`

#### 

















































































































